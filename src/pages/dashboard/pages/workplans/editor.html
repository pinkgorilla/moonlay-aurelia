<template>
  <require from="value-converters/number-format"></require>
  <require from="value-converters/date-format"></require>
  <h3>Workplans</h3>
  <div class="row" repeat.for="item of data.items">
    <div class="col-md-2">
      <div class="form-group">
        <label class="col-sm-2 control-label">${$index+1}</label>
        <div class="col-sm-10">
          <select id="${'item_type_' + $index}" class="form-control" value.bind="item.type">
            <option value="" disabled selected>-Workitem Type-</option>
            <option repeat.for="type of types" value.bind="type.value">${type.label}</option>
          </select>
          <span class="help-block">task type</span>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="form-group">
        <input type="text" class="form-control" id="${'item_name_' + $index}" value.bind="item.name">
        <span class="help-block">task name</span>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <input type="text" class="form-control" id="${'item_description_' + $index}" value.bind="item.description">
        <span class="help-block">task description</span>
      </div>
    </div>
    <div class="col-md-4" if.bind="item.void">
      <div class="form-group">
          <input type="text" class="form-control" id="${'item_reason_' + $index}" value.bind="item.reason">
          <span class="help-block">void reason</span>
      </div>
    </div>
    <div class="col-md-2" if.bind="!item.void">
      <div class="form-group">
        <input type="date" class="form-control" id="${'item_estdate_' + $index}" value.bind="item.estDate | dateFormat:'YYYY-MM-DD'">
        <span class="help-block">estimated completetion date</span>
      </div>
    </div>
    <div class="col-md-2" if.bind="!item.void">
      <div class="col-sm-2">
        <div class="form-group">
          <input type="checkbox" id="${'item_done_' + $index}" checked.bind="item.done">
        </div>
      </div>
      <div class="col-sm-10">
        <div class="form-group">
          <input type="date" class="form-control" id="${'item_completeDate_' + $index}" value.bind="item.completeDate | dateFormat:'YYYY-MM-DD'" if.bind="item.done">
          <span class="help-block">actual completetion date</span>
        </div>
      </div>
    </div>
    <div class="col-md-1">
      <div class="form-group">
        <a href="#" class="btn btn-danger btn-sm" click.delegate="remove(item)" if.bind="item.no == 0">remove</a>
        <input type="checkbox" id="${'item_void_' + $index}" checked.bind="item.void" if.bind="item.no != 0">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3 col-md-offset-9 text-right">
      <a href="#" class="btn btn-link btn-raised" click.delegate="back()">cancel</a>
      <a href="#" class="btn btn-default btn-raised" click.delegate="add()">add item</a>
      <a href="#" class="btn btn-primary btn-raised" click.delegate="save()">save</a>
    </div>
  </div>
</template>
