<template>
  <require from="../../../value-converters/number-format"></require>
  <require from="../../../value-converters/date-format"></require>

  <h3>Workplans</h3>
  <table>
    <tbody>
      <tr repeat.for="row of workplans">
        <td>${row.month + '/' + row.period}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4">
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#workplan-modal">
            Create Workplan
          </button>
        </td>
      </tr>
    </table>
  </tfoot>
  <!-- Modal -->
  <div class="modal fade" id="workplan-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document" style="width:90%;">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="myModalLabel">Workplan</h4>
        </div>
        <div class="modal-body">
          <!-- ... -->
          <form>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label" for="period">Period</label>
                  <select id="type" class="form-control" value.bind="data.periodId">
                    <option value="" disabled selected>Select Workplan Type</option>
                    <option repeat.for="period of periods" value.bind="period._id">${period.month + ', period ' + period.period}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="row visible-lg-block">
                  <div class="col-md-2">
                    <h4>Type</h4>
                  </div>
                  <div class="col-md-3">
                    <h4>Name</h4>
                  </div>
                  <div class="col-md-4">
                    <h4>Description</h4>
                  </div>
                  <div class="col-md-2">
                    <h4>Est Date</h4>
                  </div>
                  <div class="col-md-1"></div>
                </div>
                <div class="row" repeat.for="item of workplan.items">
                  <div class="col-lg-2">
                    <div class="form-group">
                      <select id="${'type_' + $index}" class="form-control" value.bind="data.type">
                        <option value="" disabled selected>Select Workplan Type</option>
                        <option repeat.for="type of types" value.bind="type.value">${type.label}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="form-group">
                      <input type="text" class="form-control" id="${'name' + $index}" value.bind="item.name">
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="form-group">
                      <input type="text" class="form-control" id="${'description' + $index}" value.bind="item.description">
                    </div>
                  </div>
                  <div class="col-lg-2">
                    <div class="form-group">
                      <input type="date" class="form-control" id="${'estimatedCompletionDate_' + $index}" value.bind="item.estimatedCompletionDate | dateFormat:'YYYY-MM-DD'">
                    </div>
                  </div>
                  <div class="col-lg-1">
                    <div class="form-group">
                      <button type="button" class="btn btn-primary" aria-label="Left Align">
                        <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <!-- ... -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
</template>
